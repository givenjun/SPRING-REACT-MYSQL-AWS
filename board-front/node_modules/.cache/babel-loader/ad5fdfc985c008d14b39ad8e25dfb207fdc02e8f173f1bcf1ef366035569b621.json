{"ast":null,"code":"import{useEffect,useRef,useState}from'react';import'./style.css';import useBoardStore from'stores/board.store';import{useNavigate}from'react-router-dom';import{MAIN_PATH}from'constant';import{useCookies}from'react-cookie';//          component: 게시물 작성 화면 컴포넌트          //\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BoardWrite(){//          state: 본문 영역 요소 참조 상태           //\nconst titleRef=useRef(null);//          state: 본문 영역 요소 참조 상태           //\nconst contentRef=useRef(null);//          state: 이미지 입력 요소 참조 상태           //\nconst imageInputRef=useRef(null);//          state: 게시물 상태          //\nconst{title,setTitle}=useBoardStore();const{content,setContent}=useBoardStore();const{boardImageFileList,setBoardImageFileList}=useBoardStore();const{resetBoard}=useBoardStore();//          state: 쿠키 상태          //\nconst[cookies,setCookie]=useCookies();//          state: 게시물 이미지 미리보기 URL 상태          //\nconst[imageUrls,setImageUrls]=useState([]);//          function: 네비게이트 함수          //\nconst navigate=useNavigate();//          event handler: 제목 변경 이벤트 처리         //\nconst onTitleChangeHandler=event=>{const{value}=event.target;setTitle(value);if(!titleRef.current)return;titleRef.current.style.height='auto';titleRef.current.style.height=`${titleRef.current.scrollHeight}px`;};//          event handler: 내용 변경 이벤트 처리         //\nconst onContentChangeHandler=event=>{const{value}=event.target;setContent(value);if(!contentRef.current)return;contentRef.current.style.height='auto';contentRef.current.style.height=`${contentRef.current.scrollHeight}px`;};//          event handler: 이미지 변경 이벤트 처리         //\nconst onImageChangeHandler=event=>{if(!event.target.files||!event.target.files.length)return;const file=event.target.files[0];const imageUrl=URL.createObjectURL(file);const newImageUrls=imageUrls.map(item=>item);newImageUrls.push(imageUrl);setImageUrls(newImageUrls);const newBoardImageFileList=boardImageFileList.map(item=>item);newBoardImageFileList.push(file);setBoardImageFileList(newBoardImageFileList);if(!imageInputRef.current)return;imageInputRef.current.value='';};//          event handler: 이미지 업로드 버튼 클릭 이벤트 처리         //\nconst onImageUploadButtonClickHandler=()=>{if(!imageInputRef.current)return;imageInputRef.current.click();};//          event handler: 이미지 닫기 버튼 클릭 이벤트 처리         //\nconst onImageCloseButtonClickHandler=deleteIndex=>{if(!imageInputRef.current)return;imageInputRef.current.value='';const newImageUrls=imageUrls.filter((url,index)=>index!==deleteIndex);setImageUrls(newImageUrls);const newBoardImageFileList=boardImageFileList.filter((file,index)=>index!==deleteIndex);setBoardImageFileList(newBoardImageFileList);};//          effect: 마운트 시 실행할 함수          //\nuseEffect(()=>{const accessToken=cookies.accessToken;if(!accessToken){navigate(MAIN_PATH());return;}resetBoard();},[]);//          render: 게시물 작성 화면 컴포넌트 렌더링          //  \nreturn/*#__PURE__*/_jsx(\"div\",{id:\"board-write-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"board-write-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"board-write-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"board-write-title-box\",children:/*#__PURE__*/_jsx(\"textarea\",{ref:titleRef,className:\"board-write-title-textarea\",rows:1,placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\",value:title,onChange:onTitleChangeHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-write-content-box\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:contentRef,className:\"board-write-content-textarea\",placeholder:\"\\uBCF8\\uBB38\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\",value:content,onChange:onContentChangeHandler}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-button\",onClick:onImageUploadButtonClickHandler,children:/*#__PURE__*/_jsx(\"div\",{className:\"icon image-box-light-icon\"})}),/*#__PURE__*/_jsx(\"input\",{ref:imageInputRef,type:\"file\",accept:\"image/*\",style:{display:'none'},onChange:onImageChangeHandler})]}),/*#__PURE__*/_jsx(\"div\",{className:\"board-write-images-box\",children:imageUrls.map((imageUrl,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"board-write-image-box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"board-write-image\",src:imageUrl}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-button image-close\",onClick:()=>onImageCloseButtonClickHandler(index),children:/*#__PURE__*/_jsx(\"div\",{className:\"icon close-icon\"})})]}))})]})})});}","map":{"version":3,"names":["useEffect","useRef","useState","useBoardStore","useNavigate","MAIN_PATH","useCookies","jsx","_jsx","jsxs","_jsxs","BoardWrite","titleRef","contentRef","imageInputRef","title","setTitle","content","setContent","boardImageFileList","setBoardImageFileList","resetBoard","cookies","setCookie","imageUrls","setImageUrls","navigate","onTitleChangeHandler","event","value","target","current","style","height","scrollHeight","onContentChangeHandler","onImageChangeHandler","files","length","file","imageUrl","URL","createObjectURL","newImageUrls","map","item","push","newBoardImageFileList","onImageUploadButtonClickHandler","click","onImageCloseButtonClickHandler","deleteIndex","filter","url","index","accessToken","id","children","className","ref","rows","placeholder","onChange","onClick","type","accept","display","src"],"sources":["C:/Users/정준/Documents/spring-react-mysql/board-front/src/views/Board/Write/index.tsx"],"sourcesContent":["import { ChangeEvent, useEffect, useRef, useState } from 'react'\r\nimport './style.css'\r\nimport useBoardStore from 'stores/board.store';\r\nimport { useLoginUserStore } from 'stores';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { MAIN_PATH } from 'constant';\r\nimport { useCookies } from 'react-cookie';\r\n\r\n\r\n//          component: 게시물 작성 화면 컴포넌트          //\r\nexport default function BoardWrite() {\r\n\r\n  //          state: 본문 영역 요소 참조 상태           //\r\n  const titleRef = useRef<HTMLTextAreaElement | null>(null);\r\n  //          state: 본문 영역 요소 참조 상태           //\r\n  const contentRef = useRef<HTMLTextAreaElement | null>(null);\r\n  //          state: 이미지 입력 요소 참조 상태           //\r\n  const imageInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  //          state: 게시물 상태          //\r\n  const { title, setTitle } = useBoardStore(); \r\n  const { content, setContent } = useBoardStore();\r\n  const { boardImageFileList, setBoardImageFileList } = useBoardStore();\r\n  const { resetBoard } = useBoardStore();\r\n\r\n  //          state: 쿠키 상태          //\r\n  const [cookies, setCookie] = useCookies();\r\n\r\n  //          state: 게시물 이미지 미리보기 URL 상태          //\r\n  const [imageUrls, setImageUrls] = useState<string[]>([]);\r\n\r\n  //          function: 네비게이트 함수          //\r\n  const navigate = useNavigate();\r\n\r\n  //          event handler: 제목 변경 이벤트 처리         //\r\n  const onTitleChangeHandler = (event:ChangeEvent<HTMLTextAreaElement>) => {\r\n    const { value } = event.target;\r\n    setTitle(value);\r\n\r\n    if (!titleRef.current) return;\r\n    titleRef.current.style.height = 'auto';\r\n    titleRef.current.style.height = `${titleRef.current.scrollHeight}px`\r\n  }\r\n  //          event handler: 내용 변경 이벤트 처리         //\r\n  const onContentChangeHandler = (event:ChangeEvent<HTMLTextAreaElement>) => {\r\n    const { value } = event.target;\r\n    setContent(value);\r\n\r\n    if (!contentRef.current) return;\r\n    contentRef.current.style.height = 'auto';\r\n    contentRef.current.style.height = `${contentRef.current.scrollHeight}px`\r\n  }\r\n  //          event handler: 이미지 변경 이벤트 처리         //\r\n  const onImageChangeHandler = (event:ChangeEvent<HTMLInputElement>) => {\r\n    if (!event.target.files || !event.target.files.length) return;\r\n    const file = event.target.files[0];\r\n\r\n    const imageUrl = URL.createObjectURL(file);\r\n    const newImageUrls = imageUrls.map(item => item);\r\n    newImageUrls.push(imageUrl);\r\n    setImageUrls(newImageUrls);\r\n\r\n    const newBoardImageFileList = boardImageFileList.map(item => item);\r\n    newBoardImageFileList.push(file);\r\n    setBoardImageFileList(newBoardImageFileList);\r\n\r\n    if (!imageInputRef.current) return;\r\n    imageInputRef.current.value = '';\r\n  }\r\n\r\n  //          event handler: 이미지 업로드 버튼 클릭 이벤트 처리         //\r\n  const onImageUploadButtonClickHandler = () => {\r\n    if (!imageInputRef.current) return;\r\n    imageInputRef.current.click();\r\n  }\r\n  //          event handler: 이미지 닫기 버튼 클릭 이벤트 처리         //\r\n  const onImageCloseButtonClickHandler = (deleteIndex: number) => {\r\n    if (!imageInputRef.current) return;\r\n    imageInputRef.current.value = '';\r\n\r\n    const newImageUrls = imageUrls.filter((url, index) => index !== deleteIndex);\r\n    setImageUrls(newImageUrls);\r\n\r\n    const newBoardImageFileList = boardImageFileList.filter((file, index) => index !== deleteIndex);\r\n    setBoardImageFileList(newBoardImageFileList);\r\n  }\r\n\r\n  //          effect: 마운트 시 실행할 함수          //\r\n  useEffect(() => {\r\n    const accessToken = cookies.accessToken;\r\n    if (!accessToken) {\r\n      navigate(MAIN_PATH());\r\n      return;\r\n    }\r\n    resetBoard();\r\n  }, []);\r\n\r\n  //          render: 게시물 작성 화면 컴포넌트 렌더링          //  \r\n  return (\r\n    <div id='board-write-wrapper'>\r\n      <div className='board-write-container'>\r\n        <div className='board-write-box'>\r\n          <div className='board-write-title-box'>\r\n            <textarea ref={titleRef} className='board-write-title-textarea' rows={1} placeholder='제목을 작성해주세요.' value={title} onChange={onTitleChangeHandler}/>\r\n          </div>\r\n          <div className='divider'></div>\r\n          <div className='board-write-content-box'>\r\n            <textarea ref={contentRef} className='board-write-content-textarea' placeholder='본문을 작성해주세요.' value={content} onChange={onContentChangeHandler}/>\r\n            <div className='icon-button' onClick={onImageUploadButtonClickHandler}>\r\n              <div className='icon image-box-light-icon'></div>\r\n            </div>\r\n            <input ref={imageInputRef} type='file' accept='image/*' style={{ display: 'none' }} onChange={onImageChangeHandler} />\r\n          </div>\r\n          <div className='board-write-images-box'>\r\n            {imageUrls.map((imageUrl, index) => \r\n              <div className='board-write-image-box'>\r\n                <img className='board-write-image' src={imageUrl}/>\r\n                <div className='icon-button image-close' onClick={() => onImageCloseButtonClickHandler(index)}>\r\n                  <div className='icon close-icon'></div>\r\n                </div>\r\n            </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}